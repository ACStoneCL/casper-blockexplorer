FROM node:lts-alpine

ARG REACT_APP_API_URL
ENV REACT_APP_API_URL "$REACT_APP_API_URL"

ARG REACT_APP_NFT_PREFIX
ENV REACT_APP_NFT_PREFIX "$REACT_APP_NFT_PREFIX"

ARG REACT_APP_S3_URL
ENV REACT_APP_S3_URL "$REACT_APP_S3_URL"

ARG REACT_APP_IPFS_URL
ENV REACT_APP_IPFS_URL "$REACT_APP_IPFS_URL"

ARG REACT_APP_GTM_ID
ENV REACT_APP_GTM_ID "$REACT_APP_GTM_ID"

WORKDIR /app
COPY frontend .

EXPOSE 3000

RUN npm install
RUN npm run build
RUN npm install -g express morgan

CMD npm start
