FROM node:lts-alpine

ARG REACT_APP_API_URL
ENV REACT_APP_API_URL "$REACT_APP_API_URL"

ARG REACT_APP_NFT_PREFIX
ENV REACT_APP_NFT_PREFIX "$REACT_APP_NFT_PREFIX"

ARG REACT_APP_S3_URL
ENV REACT_APP_S3_URL "$REACT_APP_S3_URL"

ARG REACT_APP_IPFS_URL
ENV REACT_APP_IPFS_URL "$REACT_APP_IPFS_URL"

ARG REACT_APP_GTM_ID
ENV REACT_APP_GTM_ID "$REACT_APP_GTM_ID"

ARG HUSKY=0
ENV HUSKY 0

RUN apk add python3 g++ make

WORKDIR /app

EXPOSE 3000

CMD HUSY=0 npm install && npm run build && npm run preview
